"use strict";function t(){$(".b-main-box__map #map").css({minHeight:$(window).height()-$(".b-top-box").height()})}helpers.tabs({parent:"b-tabs-box",tab:["b-tabs-box__tab","b-tabs-box__tab_active"],content:["b-tabs-box__content","b-tabs-box__content_active"]}),$("#print").click(function(){return window.print(),!1});var e=$(".dropzone").dropzone({url:"/"});if($(".-phone").mask("+375 (99)-999-99-99"),$('.b-edit-form input[type="submit"]').click(function(){return $("#success").fancybox().trigger("click"),!1}),function(){var t,e=$(".b-profile__avatar-img"),a=$('.b-profile__edit input[type="file"]');a.change(function(t){if(this.files&&this.files[0]){var e=new FileReader;e.onload=n,e.readAsDataURL(this.files[0])}});var n=function(a){t||(t=e.attr("src")),e.attr("src",a.target.result),$(".b-profile__avatar-cancel").length||e.after('<a class="b-profile__avatar-cancel">Удалить</a>')};$(".b-profile").on("click",".b-profile__avatar-cancel",function(){e.attr("src",t),a[0].value="",$(this).remove()})}(),$("#map").length){t();var a=new google.maps.LatLng(53.966683,27.516322),n={zoom:14,center:a,disableDefaultUI:!0},i=new google.maps.Map(document.getElementById("map"),n),o=new google.maps.Marker({position:a,title:"Hello World!"});i.setCenter(a),i.panBy(0,-200),o.setMap(i)}

$('.b-dropdown__delete').on('click',function () {
  $(this).parent().remove();
})
$('.b-product__date-input').mask("99.99.9999", {placeholder: 'DD.MM.YYYY' });

function changeAmount(obj) {

  var that = obj;
  var data = that.data('set');
  var target = that.parent().find('.b-product__count-input');
  var value = target.val();

  switch (data) {
    case 'minus-500':
      if (value<500) {
        target.val(0);
      } else {
        target.val(+value-500);
      }      
      break;
    case 'minus-50':
      if (value<50) {
        target.val(0);
      } else {
        target.val(+value-50);
      }
      break;
    case 'plus-50':
      target.val(+value+50);
      break;
    case 'plus-500':
      target.val(+value+500);
      break;      
    default:
      break; 
  }

}

$('.b-product__count-btn').on('click',function () {
  changeAmount($(this));

})

function changeDate(obj) {
  var that = obj;
  var data = that.data('date');  
  var target = that.parent().find('.b-product__date-input');
  var arrDate = target.val().split('.');
  var currentDate = new Date(arrDate[2],arrDate[1]-1,arrDate[0]);
  var newDate, day, month, year;
  // console.log(newDate)

  switch (data) {
    case 'minus-15':
      currentDate.setDate(currentDate.getDate() - 15);
      day = currentDate.getDate() < 10 ? "0" + currentDate.getDate() : currentDate.getDate();
      month = (+currentDate.getMonth()+1) < 10 ? "0" + (+currentDate.getMonth()+1) : (+currentDate.getMonth()+1);
      year = currentDate.getFullYear();
      newDate = day+"."+month+"."+year;
      target.val(newDate);
      break;
    case 'minus-5':
      currentDate.setDate(currentDate.getDate() - 5);
      day = currentDate.getDate() < 10 ? "0" + currentDate.getDate() : currentDate.getDate();
      month = (+currentDate.getMonth()+1) < 10 ? "0" + (+currentDate.getMonth()+1) : (+currentDate.getMonth()+1);
      year = currentDate.getFullYear();
      newDate = day+"."+month+"."+year;
      target.val(newDate);
      break;
    case 'plus-5':
      currentDate.setDate(currentDate.getDate() + 5);
      day = currentDate.getDate() < 10 ? "0" + currentDate.getDate() : currentDate.getDate();
      month = (+currentDate.getMonth()+1) < 10 ? "0" + (+currentDate.getMonth()+1) : (+currentDate.getMonth()+1);
      year = currentDate.getFullYear();
      newDate = day+"."+month+"."+year;
      target.val(newDate);
      break;
    case 'plus-15':
      currentDate.setDate(currentDate.getDate() + 15);
      day = currentDate.getDate() < 10 ? "0" + currentDate.getDate() : currentDate.getDate();
      month = (+currentDate.getMonth()+1) < 10 ? "0" + (+currentDate.getMonth()+1) : (+currentDate.getMonth()+1);
      year = currentDate.getFullYear();
      newDate = day+"."+month+"."+year;
      target.val(newDate);
      break;      
    default:
      break; 
  }
}

$('.b-product__date-btn').on('click',function () {
  changeDate($(this));
})

$('.b-product__checkbox .b-checkbox-a__native').on('change', function () {
  $.fancybox.open({
      href: '#add'
  });
})

